/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Renderer","sap/ui/core/library","sap/ui/Device","./library","./ListItemBaseRenderer","./Label","sap/base/Log","sap/base/security/encodeXML"],function(e,t,i,r,a,s,l,n){"use strict";var d=r.PopinDisplay;var o=t.VerticalAlign;var u=r.PopinLayout;var p=e.extend(a);p.render=function(e,t){var i=t.getTable();if(!i){return}a.render.apply(this,arguments);if(t.getVisible()&&i.hasPopin()){this.renderPopin(e,t,i)}};p.renderHighlight=function(e,t){e.write('<td class="sapMListTblHighlightCell" aria-hidden="true" role="presentation">');a.renderHighlight.apply(this,arguments);e.write("</td>")};p.renderType=function(e,t){e.write('<td class="sapMListTblNavCol" aria-hidden="true" role="presentation">');a.renderType.apply(this,arguments);e.write("</td>")};p.renderModeContent=function(e,t){e.write('<td class="sapMListTblSelCol" aria-hidden="true" role="presentation">');a.renderModeContent.apply(this,arguments);e.write("</td>")};p.renderCounter=function(e,t){};p.getAriaRole=function(e){return""};p.renderLIAttributes=function(e,t){e.addClass("sapMListTblRow");var i=t.getVAlign();if(i!=o.Inherit){e.addClass("sapMListTblRow"+i)}var r=t.getTable();if(r&&r.getAlternateRowColors()){var a=r.indexOfItem(t);if(a%2==0){e.addClass("sapMListTblRowAlternate")}}};p.renderLIContentWrapper=function(e,t){var i=t.getTable();if(!i){return}var r=i.getColumns(true),a=t.getCells();t._destroyClonedHeaders();r.forEach(function(r,s){var d,o,u=true,p=a[r.getInitialOrder()];if(!p||!r.getVisible()||r.isPopin()){r.setIndex(-1);return}e.write("<td");e.addClass("sapMListTblCell");e.writeAttribute("id",t.getId()+"_cell"+s);e.writeAttribute("data-sap-ui-column",r.getId());if(r){d=r.getStyleClass(true);d&&e.addClass(n(d));o=r.getHeader();if(o){e.writeAttribute("headers",o.getId())}if(!i.hasPopin()&&r.getMergeDuplicates()){var g=r.getMergeFunctionName(),b=g.split("#"),C=b[1],w=b[0];if(typeof p[w]!="function"){l.warning("mergeFunctionName property is defined on "+r+" but this is not function of "+p)}else if(i._bRendering||!p.bOutput){var f=r.getLastValue(),c=p[w](C);if(f===c){u=sap.ui.getCore().getConfiguration().getAccessibility();p.addStyleClass("sapMListTblCellDupCnt");e.addClass("sapMListTblCellDup")}else{r.setLastValue(c)}}else if(p.hasStyleClass("sapMListTblCellDupCnt")){e.addClass("sapMListTblCellDup")}}r.getVAlign()!="Inherit"&&e.addStyle("vertical-align",r.getVAlign().toLowerCase());var L=r.getCssAlign();if(L){e.addStyle("text-align",L)}e.writeStyles()}e.writeClasses();e.write(">");if(u){this.applyAriaLabelledBy(o,p);e.renderControl(p)}e.write("</td>")},this)};p.applyAriaLabelledBy=function(e,t){if(e&&e.getText&&e.getVisible()&&t.getAriaLabelledBy&&(t.getAriaLabelledBy()||[]).indexOf(e.getId())==-1){t.addAriaLabelledBy(e)}};p.renderPopin=function(e,t,r){t.removePopin();e.write("<tr");e.addClass("sapMListTblSubRow");e.writeElementData(t.getPopin());e.writeAttribute("tabindex","-1");if(t.isSelectable()){e.writeAttribute("aria-selected",t.getSelected())}e.writeClasses();e.write(">");this.renderHighlight(e,t);e.write("<td");e.writeAttribute("id",t.getId()+"-subcell");e.writeAttribute("colspan",r.getColSpan());var a=r.getPopinLayout();if(i.browser.msie||i.browser.edge&&i.browser.version<16){a=u.Block}e.writeAttribute("aria-labelledby",this.getAriaAnnouncement(null,"TABLE_POPIN_ROLE_DESCRIPTION"));e.write("><div");e.addClass("sapMListTblSubCnt");e.addClass("sapMListTblSubCnt"+a);e.writeClasses();e.write(">");var l=t.getCells(),o=r.getColumns(true);o.forEach(function(i){if(!i.getVisible()||!i.isPopin()){return}var r=l[i.getInitialOrder()],a=i.getHeader();if(!a&&!r){return}var o=i.getStyleClass(),u=i.getPopinDisplay();e.write("<div");e.addClass("sapMListTblSubCntRow");o&&e.addClass(n(o));e.writeClasses();e.write(">");if(a&&u!=d.WithoutHeader){e.write("<div");e.addClass("sapMListTblSubCntHdr");e.writeClasses();e.write(">");var p=sap.ui.require("sap/m/ColumnHeader");if(typeof p=="function"&&a instanceof p){var g=a.getText();a=new s({text:g})}else{a=a.clone()}i.addDependent(a);t._addClonedHeader(a);e.renderControl(a);e.write("</div>");e.write("<div class='sapMListTblSubCntSpr'>:</div>")}if(r){e.write("<div");e.addClass("sapMListTblSubCntVal");e.addClass("sapMListTblSubCntVal"+u);e.writeClasses();e.write(">");this.applyAriaLabelledBy(a,r);e.renderControl(r);e.write("</div>")}e.write("</div>")},this);e.write("</div></td></tr>")};p.addLegacyOutlineClass=function(e,t){};return p},true);