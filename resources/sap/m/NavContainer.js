/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./library","sap/ui/core/Control","sap/ui/core/RenderManager","sap/ui/Device","./NavContainerRenderer","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/dom/jquery/Focusable"],function(e,t,a,i,n,s,o){"use strict";var r=t.extend("sap.m.NavContainer",{metadata:{library:"sap.m",properties:{autoFocus:{type:"boolean",group:"Behavior",defaultValue:true},height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},visible:{type:"boolean",group:"Appearance",defaultValue:true},defaultTransitionName:{type:"string",group:"Appearance",defaultValue:"slide"}},defaultAggregation:"pages",aggregations:{pages:{type:"sap.ui.core.Control",multiple:true,singularName:"page"}},associations:{initialPage:{type:"sap.ui.core.Control",multiple:false}},events:{navigate:{allowPreventDefault:true,parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}},afterNavigate:{parameters:{from:{type:"sap.ui.core.Control"},fromId:{type:"string"},to:{type:"sap.ui.core.Control"},toId:{type:"string"},firstTime:{type:"boolean"},isTo:{type:"boolean"},isBack:{type:"boolean"},isBackToTop:{type:"boolean"},isBackToPage:{type:"boolean"},direction:{type:"string"}}}}}});var l=sap.ui.getCore().getConfiguration().getAnimation(),d=function(e){return l?e:0},p=function(e){return!!(e&&e.getParent())};r.prototype.init=function(){this._pageStack=[];this._aQueue=[];this._mVisitedPages={};this._mFocusObject={};this._iTransitionsCompleted=0;this._bNeverRendered=true;this._bNavigating=false;this._bRenderingInProgress=false};r.prototype.exit=function(){this._mFocusObject=null};r.prototype.onBeforeRendering=function(){var e=this.getCurrentPage();if(this._bNeverRendered&&e){var t=e.getId();if(!this._mVisitedPages[t]){this._mVisitedPages[t]=true;var a={from:null,fromId:null,to:e,toId:t,firstTime:true,isTo:false,isBack:false,isBackToPage:false,isBackToTop:false,direction:"initial"};var i=s.Event("BeforeFirstShow",a);i.srcControl=this;i.data=this._oToDataBeforeRendering||{};i.backData={};e._handleEvent(i);i=s.Event("BeforeShow",a);i.srcControl=this;i.data=this._oToDataBeforeRendering||{};i.backData={};e._handleEvent(i)}}};r.prototype.onAfterRendering=function(){var e=this.getCurrentPage(),t,a,i,n;if(this._bNeverRendered&&e){this._bNeverRendered=false;delete this._bNeverRendered;i=e.getId();if(!this._isInsideAPopup()&&this.getAutoFocus()){t=r._applyAutoFocusTo(i);if(t){this._mFocusObject[i]=t}}a={from:null,fromId:null,to:e,toId:i,firstTime:true,isTo:false,isBack:false,isBackToTop:false,isBackToPage:false,direction:"initial"};n=s.Event("AfterShow",a);n.srcControl=this;n.data=this._oToDataBeforeRendering||{};n.backData={};e._handleEvent(n)}};r.prototype._getActualInitialPage=function(){var e=this.getInitialPage();if(e){var t=sap.ui.getCore().byId(e);if(t){return t}else{o.error("NavContainer: control with ID '"+e+"' was set as 'initialPage' but was not found as a DIRECT child of this NavContainer (number of current children: "+this.getPages().length+").")}}var a=this.getPages();return a.length>0?a[0]:null};r.prototype.getPage=function(e){var t=this.getPages();for(var a=0;a<t.length;a++){if(t[a]&&t[a].getId()==e){return t[a]}}return null};r.prototype._ensurePageStackInitialized=function(e){if(this._pageStack.length===0){var t=this._getActualInitialPage();if(t){this._pageStack.push({id:t.getId(),isInitial:true,data:e||{}})}}return this._pageStack};r.prototype.getCurrentPage=function(){var e=this._ensurePageStackInitialized();if(e.length>=1){return this.getPage(e[e.length-1].id)}else{o.warning(this+": page stack is empty but should have been initialized - application failed to provide a page to display");return undefined}};r.prototype.getPreviousPage=function(){var e=this._ensurePageStackInitialized();if(e.length>1){return this.getPage(e[e.length-2].id)}else if(e.length==1){return undefined}else{o.warning(this+": page stack is empty but should have been initialized - application failed to provide a page to display")}};r.prototype.currentPageIsTopPage=function(){var e=this._ensurePageStackInitialized();return e.length===1};r.prototype.insertPreviousPage=function(e,t,a){var i=this._ensurePageStackInitialized();if(this._pageStack.length>0){var n=i.length-1;var s={id:e,transition:t,data:a};if(n===0){s.isInitial=true;delete i[i.length-1].isInitial}i.splice(n,0,s)}else{o.warning(this+": insertPreviousPage called with empty page stack; ignoring")}return this};r._applyAutoFocusTo=function(e){var t=s(document.getElementById(e)).firstFocusableDomRef();if(t){t.focus()}return t};r.prototype._applyAutoFocus=function(e){var t=e.toId,a,i=e.isBack||e.isBackToPage||e.isBackToTop;if(!e.bFocusInsideFromPage){return}if(i){a=this._mFocusObject!=null?this._mFocusObject[t]:null;if(a){a.focus()}else{r._applyAutoFocusTo(t)}}else if(e.isTo){r._applyAutoFocusTo(t)}};r.prototype._afterTransitionCallback=function(e,t,a){var i=s.Event("AfterShow",e);i.data=t||{};i.backData=a||{};i.srcControl=this;e.to._handleEvent(i);i=s.Event("AfterHide",e);i.srcControl=this;e.from._handleEvent(i);this._iTransitionsCompleted++;this._bNavigating=false;if(this.getAutoFocus()){this._applyAutoFocus(e)}this.fireAfterNavigate(e);o.info(this+": _afterTransitionCallback called, to: "+e.toId);if(e.to.hasStyleClass("sapMNavItemHidden")){o.warning(this.toString()+": target page '"+e.toId+"' still has CSS class 'sapMNavItemHidden' after transition. This should not be the case, please check the preceding log statements.");e.to.removeStyleClass("sapMNavItemHidden")}this._dequeueNavigation()};r.prototype._dequeueNavigation=function(){var e=this._aQueue.shift();if(typeof e==="function"){e()}};r.prototype._isInPageStack=function(e){return this._pageStack.some(function(t){return t.id===e})};r.prototype._safeBackToPage=function(e,t,a,i){var n;if(!this.getPage(e)){return this}n=this.getCurrentPage();if(n&&n.getId()===e){return this}if(this._isInPageStack(e)){return this.backToPage(e,a,i)}else{a=a||{};a.safeBackToPage=true;return this.to(e,t,a,i)}};r.prototype._isFocusInControl=function(e){return s(document.activeElement).closest(e.$()).length>0};r.prototype.to=function(i,n,l,p,g){if(i instanceof t){i=i.getId()}if(typeof n!=="string"){p=l;l=n}n=n||this.getDefaultTransitionName();p=p||{};l=l||{};var u={id:i,transition:n,data:l};this._ensurePageStackInitialized(l);if(this._bNavigating){o.info(this.toString()+": Cannot navigate to page "+i+" because another navigation is already in progress. - navigation will be executed after the previous one");this._aQueue.push(s.proxy(function(){this.to(i,n,l,p,true)},this));return this}if(this._bNeverRendered){this._oToDataBeforeRendering=l}var v=this.getCurrentPage();if(v&&v.getId()===i){o.warning(this.toString()+": Cannot navigate to page "+i+" because this is the current page.");if(g){this._dequeueNavigation()}if(this._pageStack.length===1){this._pageStack[0].transition=u.transition}return this}var f=this.getPage(i);if(f){if(!v){o.warning("Navigation triggered to page with ID '"+i+"', but the current page is not known/aggregated by "+this);return this}var h={from:v,fromId:v.getId(),to:f,toId:i,firstTime:!this._mVisitedPages[i],isTo:true,isBack:false,isBackToTop:false,isBackToPage:false,direction:"to",bFocusInsideFromPage:this._isFocusInControl(v)};if(h.bFocusInsideFromPage){this._mFocusObject[v.getId()]=document.activeElement}var c=this.fireNavigate(h);if(c){e.closeKeyboard();var m=s.Event("BeforeHide",h);m.srcControl=this;v._handleEvent(m);if(!this._mVisitedPages[i]){m=s.Event("BeforeFirstShow",h);m.srcControl=this;m.data=l||{};m.backData={};f._handleEvent(m)}m=s.Event("BeforeShow",h);m.srcControl=this;m.data=l||{};m.backData={};f._handleEvent(m);this._pageStack.push(u);o.info(this.toString()+": navigating to page '"+i+"': "+f.toString());this._mVisitedPages[i]=true;if(!this.getDomRef()){o.info("'Hidden' 'to' navigation in not-rendered NavContainer "+this.toString());if(this._bRenderingInProgress){setTimeout(this.invalidate.bind(this),0)}return this}var y;if(!(y=f.getDomRef())||y.parentNode!=this.getDomRef()||a.isPreservedContent(y)){f.addStyleClass("sapMNavItemRendering");o.debug("Rendering 'to' page '"+f.toString()+"' for 'to' navigation");var C=sap.ui.getCore().createRenderManager();C.render(f,this.getDomRef());C.destroy();f.addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemRendering")}var b=r.transitions[n]||r.transitions["slide"];var I=this._iTransitionsCompleted;var S=this;window.setTimeout(function(){if(S&&S._iTransitionsCompleted<I+1){o.warning("Transition '"+n+"' 'to' was triggered five seconds ago, but has not yet invoked the end-of-transition callback.")}},d(5e3));this._bNavigating=true;var N=l.safeBackToPage||p.safeBackToPage?"back":"to";b[N].call(this,v,f,s.proxy(function(){this._afterTransitionCallback(h,l)},this),p)}else{o.info("Navigation to page with ID '"+i+"' has been aborted by the application")}}else{o.warning("Navigation triggered to page with ID '"+i+"', but this page is not known/aggregated by "+this)}return this};r.prototype.back=function(e,t){this._backTo("back",e,t);return this};r.prototype.backToPage=function(e,t,a){this._backTo("backToPage",t,a,e);return this};r.prototype.backToTop=function(e,t){this._backTo("backToTop",e,t);return this};r.prototype._backTo=function(i,n,l,p){if(this._bNavigating){o.warning(this.toString()+": Cannot navigate back because another navigation is already in progress. - navigation will be executed after the previous one");this._aQueue.push(s.proxy(function(){this._backTo(i,n,l,p)},this));return this}if(this._pageStack.length<=1){if(this._pageStack.length===1&&!this._pageStack[0].isInitial){throw new Error("Initial page not found on the stack. How did this happen?")}this._aQueue=[];return this}else{if(p instanceof t){p=p.getId()}var g=this._pageStack[this._pageStack.length-1];var u=g.transition;var v=this.getPage(g.id);var f;var h;if(i==="backToTop"){f=this._getActualInitialPage();h=null}else if(i==="backToPage"){var c=this._findClosestPreviousPageInfo(p);if(!c){o.error(this.toString()+": Cannot navigate backToPage('"+p+"') because target page was not found among the previous pages.");return this}f=sap.ui.getCore().byId(c.id);if(!f){o.error(this.toString()+": Cannot navigate backToPage('"+p+"') because target page does not exist anymore.");return this}h=c.data}else{f=this.getPreviousPage();h=this._pageStack[this._pageStack.length-2].data}if(!f){o.error("NavContainer back navigation: target page is not defined or not aggregated by this NavContainer. Aborting navigation.");return}var m=f.getId();n=n||{};l=l||{};var y={from:v,fromId:v.getId(),to:f,toId:m,firstTime:!this._mVisitedPages[m],isTo:false,isBack:i==="back",isBackToPage:i==="backToPage",isBackToTop:i==="backToTop",direction:i,bFocusInsideFromPage:this._isFocusInControl(v)};var C=this.fireNavigate(y);if(C){e.closeKeyboard();var b=s.Event("BeforeHide",y);b.srcControl=this;v._handleEvent(b);if(!this._mVisitedPages[m]){b=s.Event("BeforeFirstShow",y);b.srcControl=this;b.backData=n||{};b.data={};f._handleEvent(b)}b=s.Event("BeforeShow",y);b.srcControl=this;b.backData=n||{};b.data=h||{};f._handleEvent(b);this._pageStack.pop();o.info(this.toString()+": navigating back to page "+f.toString());this._mVisitedPages[m]=true;if(i==="backToTop"){this._pageStack=[];o.info(this.toString()+": navigating back to top");this.getCurrentPage()}else if(i==="backToPage"){var I=[],S;while(this._pageStack[this._pageStack.length-1].id!==p){S=this._pageStack.pop();I.push(S.id)}o.info(this.toString()+": navigating back to specific page "+f.toString()+" across the pages: "+I.join(", "))}if(!this.getDomRef()){o.info("'Hidden' back navigation in not-rendered NavContainer "+this.toString());return this}var N=r.transitions[u]||r.transitions["slide"];var k=this._iTransitionsCompleted;var T=this;window.setTimeout(function(){if(T&&T._iTransitionsCompleted<k+1){o.warning("Transition '"+u+"' 'back' was triggered five seconds ago, but has not yet invoked the end-of-transition callback.")}},d(5e3));this._bNavigating=true;var _;if(!(_=f.getDomRef())||_.parentNode!=this.getDomRef()||a.isPreservedContent(_)){f.addStyleClass("sapMNavItemRendering");o.debug("Rendering 'to' page '"+f.toString()+"' for back navigation");var w=sap.ui.getCore().createRenderManager();var P=this.$().children().index(v.getDomRef());w.renderControl(f);w.flush(this.getDomRef(),false,P);w.destroy();f.addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemRendering")}if(v.getId()===f.getId()){o.info("Transition is skipped when navigating back to the same page instance"+f.toString());this._afterTransitionCallback(y,h,n);return this}N.back.call(this,v,f,s.proxy(function(){this._afterTransitionCallback(y,h,n)},this),l)}}return this};r.prototype._findClosestPreviousPageInfo=function(e){for(var t=this._pageStack.length-2;t>=0;t--){var a=this._pageStack[t];if(a.id===e){return a}}return null};r.transitions=r.transitions||{};r.transitions["show"]={to:function(e,t,a){t.removeStyleClass("sapMNavItemHidden");e&&e.addStyleClass("sapMNavItemHidden");a()},back:function(e,t,a){t.removeStyleClass("sapMNavItemHidden");e&&e.addStyleClass("sapMNavItemHidden");a()}};r.transitions["slide"]={to:function(e,t,a){e.addStyleClass("sapMNavItemCenter");window.setTimeout(function(){t.addStyleClass("sapMNavItemRight");t.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var i=false;var n=true;var o=null;o=function(){s(this).unbind("webkitTransitionEnd transitionend");if(!i){i=true}else{n=false;if(p(t)){t.removeStyleClass("sapMNavItemSliding").removeStyleClass("sapMNavItemCenter")}if(p(e)){e.removeStyleClass("sapMNavItemSliding").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemLeft")}a()}};e.$().bind("webkitTransitionEnd transitionend",o);t.$().bind("webkitTransitionEnd transitionend",o);t.addStyleClass("sapMNavItemSliding").addStyleClass("sapMNavItemCenter").removeStyleClass("sapMNavItemRight");e.addStyleClass("sapMNavItemSliding").removeStyleClass("sapMNavItemCenter").addStyleClass("sapMNavItemLeft");window.setTimeout(function(){if(n){i=true;o.apply(e.$().add(t.$()))}},d(400))},d(60))},0)},back:function(e,t,a){t.addStyleClass("sapMNavItemLeft");t.removeStyleClass("sapMNavItemHidden");e.addStyleClass("sapMNavItemCenter");window.setTimeout(function(){var n=false;var o=true;var r=null;r=function(){s(this).unbind("webkitTransitionEnd transitionend");if(!n){n=true}else{o=false;if(p(t)){t.removeStyleClass("sapMNavItemSliding").removeStyleClass("sapMNavItemCenter")}if(p(e)){e.removeStyleClass("sapMNavItemSliding").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemRight")}a()}};e.$().bind("webkitTransitionEnd transitionend",r);t.$().bind("webkitTransitionEnd transitionend",r);if(i.browser.webkit){window.setTimeout(function(){t.$().css("box-shadow","0em 1px 0em rgba(128, 128, 1280, 0.1)");window.setTimeout(function(){t.$().css("box-shadow","")},d(50))},0)}t.addStyleClass("sapMNavItemSliding").addStyleClass("sapMNavItemCenter").removeStyleClass("sapMNavItemLeft");e.addStyleClass("sapMNavItemSliding").removeStyleClass("sapMNavItemCenter").addStyleClass("sapMNavItemRight");window.setTimeout(function(){if(o){n=true;r.apply(e.$().add(t.$()))}},d(400))},d(100))}};r.transitions["fade"]={to:function(e,t,a){t.addStyleClass("sapMNavItemTransparent");t.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var i=null;var n=true;i=function(){s(this).unbind("webkitTransitionEnd transitionend");n=false;if(p(e)){e.addStyleClass("sapMNavItemHidden")}if(p(t)){t.removeStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemOpaque")}a()};t.$().bind("webkitTransitionEnd transitionend",i);t.addStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemTransparent").addStyleClass("sapMNavItemOpaque");window.setTimeout(function(){if(n){i.apply(t.$())}},d(600))},d(10))},back:function(e,t,a){e.addStyleClass("sapMNavItemOpaque");t.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var i=null;var n=true;i=function(){s(this).unbind("webkitTransitionEnd transitionend");n=false;if(p(e)){e.removeStyleClass("sapMNavItemFading").addStyleClass("sapMNavItemHidden");e.removeStyleClass("sapMNavItemTransparent")}a()};e.$().bind("webkitTransitionEnd transitionend",i);e.addStyleClass("sapMNavItemFading").removeStyleClass("sapMNavItemOpaque");e.addStyleClass("sapMNavItemTransparent");window.setTimeout(function(){if(n){i.apply(t.$())}},d(600))},d(10))}};r.transitions["flip"]={to:function(e,t,a){var i=this;window.setTimeout(function(){i.$().addClass("sapMNavFlip");t.addStyleClass("sapMNavItemFlipNext");t.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var o=true;var r=null;r=function(){s(this).unbind("webkitTransitionEnd transitionend");if(!n){n=true}else{o=false;if(p(t)){t.removeStyleClass("sapMNavItemFlipping")}if(p(e)){e.removeStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemFlipPrevious")}i.$().removeClass("sapMNavFlip");a()}};e.$().bind("webkitTransitionEnd transitionend",r);t.$().bind("webkitTransitionEnd transitionend",r);t.addStyleClass("sapMNavItemFlipping").removeStyleClass("sapMNavItemFlipNext");e.addStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemFlipPrevious");window.setTimeout(function(){if(o){n=true;r.apply(e.$().add(t.$()))}},d(600))},d(60))},0)},back:function(e,t,a){var i=this;i.$().addClass("sapMNavFlip");t.addStyleClass("sapMNavItemFlipPrevious");t.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var o=true;var r=null;r=function(){s(this).unbind("webkitTransitionEnd transitionend");if(!n){n=true}else{o=false;if(p(t)){t.removeStyleClass("sapMNavItemFlipping")}if(p(e)){e.removeStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemFlipNext")}i.$().removeClass("sapMNavFlip");a()}};e.$().bind("webkitTransitionEnd transitionend",r);t.$().bind("webkitTransitionEnd transitionend",r);t.addStyleClass("sapMNavItemFlipping").removeStyleClass("sapMNavItemFlipPrevious");e.addStyleClass("sapMNavItemFlipping").addStyleClass("sapMNavItemFlipNext");window.setTimeout(function(){if(o){n=true;r.apply(e.$().add(t.$()))}},d(600))},d(60))}};r.transitions["door"]={to:function(e,t,a){var i=this;window.setTimeout(function(){i.$().addClass("sapMNavDoor");t.addStyleClass("sapMNavItemDoorInNext");t.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var o=true;var r=null;r=function(){s(this).unbind("webkitAnimationEnd animationend");if(!n){n=true}else{o=false;if(p(t)){t.removeStyleClass("sapMNavItemDooring").removeStyleClass("sapMNavItemDoorInNext")}if(p(e)){e.removeStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemDoorInPrevious")}i.$().removeClass("sapMNavDoor");a()}};e.$().bind("webkitAnimationEnd animationend",r);t.$().bind("webkitAnimationEnd animationend",r);t.addStyleClass("sapMNavItemDooring");e.addStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemDoorInPrevious");window.setTimeout(function(){if(o){n=true;r.apply(e.$().add(t.$()))}},d(1e3))},d(60))},0)},back:function(e,t,a){var i=this;i.$().addClass("sapMNavDoor");t.addStyleClass("sapMNavItemDoorOutNext");t.removeStyleClass("sapMNavItemHidden");window.setTimeout(function(){var n=false;var o=true;var r=null;r=function(){s(this).unbind("webkitAnimationEnd animationend");if(!n){n=true}else{o=false;if(p(t)){t.removeStyleClass("sapMNavItemDooring").removeStyleClass("sapMNavItemDoorOutNext")}if(p(e)){e.removeStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemHidden").removeStyleClass("sapMNavItemDoorOutPrevious")}i.$().removeClass("sapMNavDoor");a()}};e.$().bind("webkitAnimationEnd animationend",r);t.$().bind("webkitAnimationEnd animationend",r);t.addStyleClass("sapMNavItemDooring");e.addStyleClass("sapMNavItemDooring").addStyleClass("sapMNavItemDoorOutPrevious");window.setTimeout(function(){if(o){n=true;r.apply(e.$().add(t.$()))}},d(1e3))},d(60))}};r.prototype.addCustomTransition=function(e,t,a){if(r.transitions[e]){o.warning("Transition with name "+e+" already exists in "+this+". It is now being replaced by custom transition.")}r.transitions[e]={to:t,back:a};return this};r.addCustomTransition=r.prototype.addCustomTransition;r.prototype.forceInvalidation=r.prototype.invalidate;r.prototype.invalidate=function(e){if(e==this){}else if(!e){this.forceInvalidation()}else if(e instanceof t){var a=false,i=this.getPages(),n=i.length;for(var s=0;s<n;s++){if(i[s]===e){a=true;break}}if((!a||e===this.getCurrentPage())&&!this._isInsideAPopup()){this.forceInvalidation()}}else{this.forceInvalidation()}};r.prototype._isInsideAPopup=function(){var e;e=function(t){if(!t){return false}if(t.getMetadata().isInstanceOf("sap.ui.core.PopupInterface")){return true}return e(t.getParent())};return e(this)};r.prototype.removePage=function(e){var t;if(typeof e=="number"){t=this.getPages()[e]}else if(typeof e=="string"){t=sap.ui.getCore().byId(e)}else{t=e}t=this.removeAggregation("pages",t,t!==this.getCurrentPage());this._onPageRemoved(t);return t};r.prototype._onPageRemoved=function(e){if(!e){return}e.$().remove();e.removeStyleClass("sapMNavItemHidden");e.removeStyleClass("sapMNavItem");var t=this._ensurePageStackInitialized();this._pageStack=t.filter(function(t){return e.getId()!==t.id})};r.prototype.removeAllPages=function(){var e=this.getPages();if(!e){return[]}for(var t=0;t<e.length;t++){this._onPageRemoved(e[t])}return this.removeAllAggregation("pages")};r.prototype.addPage=function(e){var t=this.getPages();if(t.indexOf(e)>-1){return this}this.addAggregation("pages",e,true);e.addStyleClass("sapMNavItem");var a=t.length;if(a===0&&this.getPages().length===1){this._fireAdaptableContentChange(e);if(this.getDomRef()){this._ensurePageStackInitialized();this.rerender()}}return this};r.prototype.insertPage=function(e,t){var a=this.getPages().length;this.insertAggregation("pages",e,t,true);e.addStyleClass("sapMNavItem");if(a===0&&this.getPages().length===1){this._fireAdaptableContentChange(e);if(this.getDomRef()){this._ensurePageStackInitialized();this.rerender()}}return this};r.prototype._getAdaptableContent=function(){return this.getCurrentPage()};r.prototype._fireAdaptableContentChange=function(e){if(e&&this.mEventRegistry["_adaptableContentChange"]){this.fireEvent("_adaptableContentChange",{parent:this,adaptableContent:e})}};return r});