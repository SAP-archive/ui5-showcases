/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/base/Log","sap/ui/thirdparty/jquery"],function(t,e,i){"use strict";return{_routeMatched:function(o,r,a){var n=this._oRouter,s,f,h,u=null,c=null,_,g,d,l=this;n._matchedRoute=this;if(!r||r===true){_=true;r=Promise.resolve()}if(this._oParent){r=this._oParent._routeMatched(o,r)}else if(this._oNestingParent){this._oNestingParent._routeMatched(o,r,this)}f=i.extend({},n._oConfig,this._oConfig);g=i.extend({},o);g.routeConfig=f;h={name:f.name,arguments:o,config:f};if(a){h.nestedRoute=a}this.fireBeforeMatched(h);n.fireBeforeRouteMatched(h);if(this._oTarget){s=this._oTarget;s._updateOptions(this._convertToTargetOptions(f));r=s._place(r);if(this._oRouter._oTargetHandler&&this._oRouter._oTargetHandler._chainNavigation){d=r;r=this._oRouter._oTargetHandler._chainNavigation(function(){return d})}}else{if(!this._oConfig.afterCreateHook){this._oConfig.afterCreateHook=function(t){if(t.isA("sap.ui.core.UIComponent")){var e=t.getRouter();if(e){l.attachEvent("switched",function(){e.stop()})}}}}if(t.browser.msie||t.browser.edge){d=r;r=new Promise(function(t,e){setTimeout(function(){if(n._oTargets){var i=n._oTargets._display(l._oConfig.target,g,l._oConfig.titleTarget,d,l._oConfig.afterCreateHook);i.then(t,e)}else{t()}},0)})}else{r=n._oTargets._display(this._oConfig.target,g,this._oConfig.titleTarget,r,this._oConfig.afterCreateHook)}}return r.then(function(t){var i,r,a;if(Array.isArray(t)){i=t;t=i[0]}t=t||{};u=t.view;c=t.control;h.view=u;h.targetControl=c;if(i){r=[];a=[];i.forEach(function(t){r.push(t.view);a.push(t.control)});h.views=r;h.targetControls=a}if(f.callback){f.callback(this,o,f,c,u)}this.fireEvent("matched",h);n.fireRouteMatched(h);if(_){e.info("The route named '"+f.name+"' did match with its pattern",this);this.fireEvent("patternMatched",h);n.fireRoutePatternMatched(h)}return t}.bind(this))}}});