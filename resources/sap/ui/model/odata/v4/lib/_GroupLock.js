/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/SyncPromise"],function(o){"use strict";function r(o,r,i,e){this.sGroupId=o;this.bLocked=r;this.oOwner=i;this.mPromiseForGroup={};this.mResolveFunctionForGroup={};this.iSerialNumber=e===undefined?Infinity:e}r.prototype.getGroupId=function(){return this.sGroupId};r.prototype.getSerialNumber=function(){return this.iSerialNumber};r.prototype.getUnlockedCopy=function(){return new r(this.sGroupId,undefined,this.oOwner,this.iSerialNumber)};r.prototype.isLocked=function(){return this.bLocked};r.prototype.setGroupId=function(o){if(!this.sGroupId){this.sGroupId=o;for(o in this.mResolveFunctionForGroup){if(this.sGroupId!==o){this.mResolveFunctionForGroup[o]();delete this.mPromiseForGroup[o];delete this.mResolveFunctionForGroup[o]}}}};r.prototype.toString=function(){var o="sap.ui.model.odata.v4.lib._GroupLock("+(this.isLocked()?"locked":"unlocked");if(this.sGroupId){o+=",group="+this.sGroupId}if(this.oOwner){o+=",owner="+this.oOwner}if(this.iSerialNumber!==Infinity){o+=",serialNumber="+this.iSerialNumber}return o+")"};r.prototype.unlock=function(o){var r;if(!this.mPromiseForGroup&&!o){throw new Error("GroupLock unlocked twice")}this.mPromiseForGroup=null;this.bLocked=false;for(r in this.mResolveFunctionForGroup){this.mResolveFunctionForGroup[r]()}this.mResolveFunctionForGroup=null};r.prototype.waitFor=function(r){var i=this;if(this.bLocked&&(!this.sGroupId||this.sGroupId===r)){if(!i.mPromiseForGroup[r]){i.mPromiseForGroup[r]=new o(function(o){i.mResolveFunctionForGroup[r]=o})}return i.mPromiseForGroup[r]}};r.$cached=new r("$cached");r.$cached.unlock=function(){};return r},false);