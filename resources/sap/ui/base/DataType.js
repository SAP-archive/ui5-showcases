/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/ObjectPath","sap/base/assert","sap/base/Log","sap/base/util/isPlainObject"],function(e,t,n,r){"use strict";var a=function(){throw new Error};a.prototype.getName=function(){return undefined};a.prototype.getBaseType=function(){return undefined};a.prototype.getPrimitiveType=function(){var e=this;while(e.getBaseType()){e=e.getBaseType()}return e};a.prototype.getComponentType=function(){return undefined};a.prototype.getDefaultValue=function(){return undefined};a.prototype.isArrayType=function(){return false};a.prototype.isEnumType=function(){return false};a.prototype.getEnumValues=function(){return undefined};a.prototype.parseValue=function(e){return e};a.prototype.isValid=undefined;a.prototype.setNormalizer=function(e){t(typeof e==="function","DataType.setNormalizer: fnNormalizer must be a function");this._fnNormalizer=typeof e==="function"?e:undefined};a.prototype.normalize=function(e){return this._fnNormalizer?this._fnNormalizer(e):e};function i(e,t,n){t=t||{};var r=n||a.prototype;var i=Object.create(r);i.getName=function(){return e};if(t.hasOwnProperty("defaultValue")){var u=t.defaultValue;i.getDefaultValue=function(){return u}}if(t.isValid){var o=t.isValid;i.isValid=r.isValid?function(e){if(!r.isValid(e)){return false}return o(e)}:o}if(t.parseValue){i.parseValue=t.parseValue}i.getBaseType=function(){return n};return i}var u=i("array",{defaultValue:[]});function o(e){t(e instanceof a,"DataType.<createArrayType>: componentType must be a DataType");var n=Object.create(a.prototype);n.getName=function(){return e.getName()+"[]"};n.getComponentType=function(){return e};n.isValid=function(t){if(t===null){return true}if(Array.isArray(t)){for(var n=0;n<t.length;n++){if(!e.isValid(t[n])){return false}}return true}return false};n.parseValue=function(t){var n=t.split(",");for(var r=0;r<n.length;r++){n[r]=e.parseValue(n[r])}return n};n.isArrayType=function(){return true};n.getBaseType=function(){return u};return n}function f(e,t){var n={},r;for(var i in t){var u=t[i];if(!r){r=u}if(typeof u!=="string"){throw new Error("Value "+u+" for enum type "+e+" is not a string")}if(!n.hasOwnProperty(u)||i==u){n[u]=i}}var o=Object.create(a.prototype);o.getName=function(){return e};o.isValid=function(e){return typeof e==="string"&&n.hasOwnProperty(e)};o.parseValue=function(e){return t[e]};o.getDefaultValue=function(){return r};o.getBaseType=function(){return s.string};o.isEnumType=function(){return true};o.getEnumValues=function(){return t};return o}var s={any:i("any",{defaultValue:null,isValid:function(e){return true}}),boolean:i("boolean",{defaultValue:false,isValid:function(e){return typeof e==="boolean"},parseValue:function(e){return e=="true"}}),int:i("int",{defaultValue:0,isValid:function(e){return typeof e==="number"&&(isNaN(e)||Math.floor(e)==e)},parseValue:function(e){return parseInt(e)}}),float:i("float",{defaultValue:0,isValid:function(e){return typeof e==="number"},parseValue:function(e){return parseFloat(e)}}),string:i("string",{defaultValue:"",isValid:function(e){return typeof e==="string"||e instanceof String},parseValue:function(e){return e}}),object:i("object",{defaultValue:null,isValid:function(e){return typeof e==="object"||typeof e==="function"},parseValue:function(e){return e?JSON.parse(e):null}}),function:i("function",{defaultValue:null,isValid:function(e){return e==null||typeof e==="function"},parseValue:function(t,n){if(t===""){return undefined}if(!/^\.?[A-Z_\$][A-Z0-9_\$]*(\.[A-Z_\$][A-Z0-9_\$]*)*$/i.test(t)){throw new Error("Function references must consist of dot separated "+"simple identifiers (A-Z, 0-9, _ or $) only, but was '"+t+"'")}var r,a,i=n&&n.context;if(t[0]==="."){if(i){r=e.get(t.slice(1),i);a=true}}else{r=e.get(t)}if(r&&this.isValid(r)){return a?r.bind(i):r}throw new TypeError("The string '"+t+"' couldn't be resolved to a function")}})};a.getType=function(i){t(i&&typeof i==="string","sTypeName must be a non-empty string");var u=s[i];if(!(u instanceof a)){if(i.indexOf("[]",i.length-2)>0){var p=i.slice(0,-2),l=this.getType(p);u=l&&o(l);if(u){s[i]=u}}else if(i!=="array"){u=e.get(i);if(u instanceof a){s[i]=u}else if(r(u)){u=s[i]=f(i,u)}else{if(u){n.warning("'"+i+"' is not a valid data type. Falling back to type 'any'.");u=s.any}else{n.error("data type '"+i+"' could not be found.");u=undefined}}}}return u};a.createType=function(e,r,u){t(typeof e==="string"&&e,"DataType.createType: type name must be a non-empty string");t(u==null||u instanceof a||typeof u==="string"&&u,"DataType.createType: base type must be empty or a DataType or a non-empty string");if(/[\[\]]/.test(e)){n.error("DataType.createType: array types ('something[]') must not be created with createType, "+"they're created on-the-fly by DataType.getType")}if(typeof u==="string"){u=a.getType(u)}u=u||s.any;if(u.isArrayType()||u.isEnumType()){n.error("DataType.createType: base type must not be an array- or enum-type")}if(e==="array"||s[e]instanceof a){if(e==="array"||s[e].getBaseType()==null){throw new Error("DataType.createType: primitive or hidden type "+e+" can't be re-defined")}n.warning("DataTypes.createType: type "+e+" is redefined. "+"This is an unsupported usage of DataType and might cause issues.")}var o=s[e]=i(e,r,u);return o};var p={};a.registerInterfaceTypes=function(t){for(var n=0;n<t.length;n++){e.set(t[n],p[t[n]]=new String(t[n]))}};a.isInterfaceType=function(t){return p.hasOwnProperty(t)&&e.get(t)===p[t]};return a},true);