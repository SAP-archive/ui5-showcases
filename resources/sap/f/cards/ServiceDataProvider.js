/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/cards/DataProvider"],function(e){"use strict";var t=e.extend("sap.f.cards.ServiceDataProvider",{metadata:{interfaces:["sap.f.cards.IServiceDataProvider"]}});t.prototype.destroy=function(){this._oDataServicePromise=null;if(this._oServiceManager){this._oServiceManager=null}e.prototype.destroy.apply(this,arguments)};t.prototype.createServiceInstances=function(e){this._oServiceManager=e;if(!this._oSettings||!this._oSettings.service){return}var t=this._oSettings.service;if(t&&typeof t==="object"){t=t.name}this._createServiceInstance(t)};t.prototype._createServiceInstance=function(e){var t=this._oSettings;this._oDataServicePromise=this._oServiceManager.getService(e).then(function(e){e.attachDataChanged(function(e){this.fireDataChanged({data:e.data})}.bind(this),t.service.parameters);return e}.bind(this))};t.prototype.getData=function(){var e=this.getSettings();var t=e.service;return new Promise(function(e,a){if(t&&this._oDataServicePromise){this._oDataServicePromise.then(function(t){t.getData().then(function(t){e(t)}).catch(function(){a("Card data service failed to get data.")})}).catch(function(){a("Card data service unavailable.")})}else{a("Could not get card data.")}}.bind(this))};return t});