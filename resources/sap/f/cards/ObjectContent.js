/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/cards/BaseContent","sap/m/HBox","sap/m/VBox","sap/m/Text","sap/m/Title","sap/f/Avatar","sap/m/Link","sap/m/Label","sap/ui/core/ResizeHandler","sap/ui/layout/AlignedFlowLayout","sap/ui/dom/units/Rem","sap/f/cards/ActionEnablement"],function(e,t,a,s,i,n,r,o,l,d,p,c){"use strict";var u=e.extend("sap.f.cards.ObjectContent",{renderer:{}});u.prototype._getRootContainer=function(){if(this._bIsBeingDestroyed){return null}var e=this.getAggregation("_content");if(!e){e=new d;this.setAggregation("_content",e)}this._sResizeListenerId=l.register(e,this.onAlignedFlowLayoutResize.bind(this));return e};u.prototype.onAlignedFlowLayoutResize=function(e){if(e&&e.size.width===e.oldSize.width&&!e.control){return}var t=e.control,a=t.getMinItemWidth(),s=t.getContent().length,i;if(a.lastIndexOf("rem")!==-1){i=p.toPx(a)}else if(a.lastIndexOf("px")!==-1){i=parseFloat(a)}var n=Math.floor(e.size.width/i);if(n>s){n=s}if(this._iColsOld===n){return}this._iColsOld=n;var r=n-1,o=Math.ceil(s/n);t.getContent().forEach(function(e,t){e.addStyleClass("sapFCardObjectSpaceBetweenGroup");if(r===t&&r<s){e.removeStyleClass("sapFCardObjectSpaceBetweenGroup");r+=n}if(t+1>(o-1)*n){e.addStyleClass("sapFCardObjectGroupLastInColumn")}else{e.removeStyleClass("sapFCardObjectGroupLastInColumn")}})};u.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this._sResizeListenerId){l.deregister(this._sResizeListenerId);this._sResizeListenerId=""}};u.prototype.setConfiguration=function(t){e.prototype.setConfiguration.apply(this,arguments);if(!t){return this}if(t.groups){this._addGroups(t)}return this};u.prototype._addGroups=function(e){var l=this._getRootContainer();var d=e.groups||[];d.forEach(function(e){var d=(new a).addStyleClass("sapFCardObjectGroup");var p=new i({text:e.title}).addStyleClass("sapFCardObjectItemTitle");d.addItem(p);e.items.forEach(function(e){var i,l=e.label,p=e.value,c,u;if(l){l=l[l.length-1]===":"?l:l+=":";c=new o({text:l}).addStyleClass("sapFCardObjectItemLabel")}if(p){switch(e.type){case"link":i=new r({href:e.url||p,text:p,target:e.target||"_blank"});break;case"email":u="mailto:"+p;if(e.emailSubject){u+="?subject="+e.emailSubject}i=new r({href:u,text:p});break;case"phone":i=new r({href:"tel:"+p,text:p});break;default:i=new s({text:p});break}}if(i){i.addStyleClass("sapFCardObjectItemText")}if(e.icon){var f=new t({items:[new n({customDisplaySize:"2.5rem",displaySize:"Custom",src:e.icon.src}).addStyleClass("sapFCardObjectItemAvatar sapFCardObjectItemLabel"),new a({items:[c,i]})]});d.addItem(f)}else{d.addItem(c);d.addItem(i)}});l.addContent(d)});this._attachActions(e,this)};c.enrich(u);return u});